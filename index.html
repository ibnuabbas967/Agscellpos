<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AGS CELL POS v3.0</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif}
body{
background:linear-gradient(135deg,#0f172a,#1e293b);
color:#fff;
overflow-x:hidden;
}
.sidebar{
position:fixed;
left:-260px;
top:0;
width:250px;
height:100%;
background:rgba(255,255,255,0.05);
backdrop-filter:blur(20px);
padding:20px;
transition:.3s;
z-index:1000;
}
.sidebar.active{left:0}
.sidebar h2{margin-bottom:20px}
.sidebar button{
width:100%;
margin-bottom:10px;
padding:10px;
border:none;
border-radius:10px;
background:#1e293b;
color:#fff;
cursor:pointer;
}
.hamburger{
position:fixed;
top:15px;
left:15px;
font-size:26px;
cursor:pointer;
z-index:1100;
}
.content{padding:70px 20px}
.card{
background:rgba(255,255,255,0.05);
padding:20px;
border-radius:20px;
margin-bottom:20px;
backdrop-filter:blur(20px);
box-shadow:0 10px 30px rgba(0,0,0,.3);
}
input,select{
width:100%;
padding:10px;
margin-bottom:10px;
border:none;
border-radius:10px;
background:#1e293b;
color:#fff;
}
button.primary{
background:#3b82f6;
color:#fff;
padding:10px;
border:none;
border-radius:10px;
cursor:pointer;
}
.table{
font-size:12px;
margin-top:10px;
}
canvas{background:#111;border-radius:20px;padding:10px}
.version{
text-align:center;
opacity:.6;
font-size:12px;
margin-top:30px;
}
</style>
</head>
<body>

<div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>

<div class="sidebar" id="sidebar">
<h2>AGS CELL</h2>
<button onclick="showPage('dashboard')">Dashboard</button>
<button onclick="showPage('digital')">Transaksi Digital</button>
<button onclick="showPage('ewallet')">E-Wallet</button>
<button onclick="showPage('hutang')">Hutang/Piutang</button>
<button onclick="showPage('grafik')">Grafik & Profit</button>
<button onclick="showPage('pengeluaran')">Pengeluaran</button>
<button onclick="showPage('setting')">Pengaturan</button>
</div>

<div class="content">

<div id="dashboard" class="page">
<div class="card"><h3>üí∞ Kas</h3><h2 id="kas">0</h2></div>
<div class="card"><h3>üè¶ Saldo Bank</h3><h2 id="bank">0</h2></div>
<div class="card"><h3>üíé Total Aset</h3><h2 id="aset">0</h2></div>
<div class="card"><h3>üìà Total Profit</h3><h2 id="profit">0</h2></div>
</div>

<div id="digital" class="page" style="display:none">
<div class="card">
<h3>Transaksi Digital</h3>
<input id="namaDigital" placeholder="Nama Pelanggan (opsional)">
<select id="jenisDigital">
<option>Listrik</option>
<option>PDAM</option>
<option>Internet</option>
<option>Pulsa</option>
</select>
<input id="modalDigital" type="number" placeholder="Harga Modal">
<input id="jualDigital" type="number" placeholder="Harga Jual">
<select id="metodeDigital">
<option>Kas</option>
<option>Bank</option>
</select>
<button class="primary" onclick="tambahDigital()">Simpan</button>
</div>
<div class="card table" id="listDigital"></div>
</div>

<div id="ewallet" class="page" style="display:none">
<div class="card">
<h3>Transaksi E-Wallet</h3>
<select id="jenisEwallet">
<option>DANA</option>
<option>OVO</option>
<option>GOPAY</option>
<option>ShopeePay</option>
</select>
<input id="modalEwallet" type="number" placeholder="Harga Modal">
<input id="jualEwallet" type="number" placeholder="Harga Jual">
<select id="metodeEwallet">
<option>Kas</option>
<option>Bank</option>
</select>
<button class="primary" onclick="tambahEwallet()">Simpan</button>
</div>
<div class="card table" id="listEwallet"></div>
</div>

<div id="grafik" class="page" style="display:none">
<div class="card">
<h3>Grafik Profit</h3>
<canvas id="chart"></canvas>
</div>
</div>

<div id="pengeluaran" class="page" style="display:none">
<div class="card">
<h3>Pengeluaran</h3>
<input id="ketPengeluaran" placeholder="Keterangan">
<input id="nomPengeluaran" type="number" placeholder="Nominal">
<select id="dariPengeluaran">
<option>Kas</option>
<option>Bank</option>
</select>
<button class="primary" onclick="tambahPengeluaran()">Simpan</button>
</div>
</div>

<div id="hutang" class="page" style="display:none">
<div class="card">
<h3>Hutang & Piutang</h3>
<p>Realtime hutang pelanggan & hutang toko otomatis tampil dari transaksi belum lunas.</p>
</div>
</div>

<div id="setting" class="page" style="display:none">
<div class="card">
<h3>Setting Modal Awal</h3>
<input id="setKas" type="number" placeholder="Modal Awal Kas">
<input id="setBank" type="number" placeholder="Modal Awal Bank">
<button class="primary" onclick="setModal()">Simpan</button>
</div>
</div>

<div class="version">AGS CELL POS v3.0 Premium 2026</div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, set, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyB3k7WPTZn1shwt-YDsEmLYh-Vd38at_LY",
authDomain: ""agscellpos.firebaseapp.com",
databaseURL: "https://agscellpos-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId: "agscellpos",
storageBucket: "agscellpos.firebasestorage.app",
messagingSenderId: "938066018375",
appId: "1:938066018375:web:8d494f37ab30eecb503162"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.toggleSidebar=()=>document.getElementById('sidebar').classList.toggle('active');
window.showPage=(id)=>{
document.querySelectorAll('.page').forEach(p=>p.style.display='none');
document.getElementById(id).style.display='block';
}

let kas=0, bank=0, totalProfit=0;

onValue(ref(db,"saldo"),snap=>{
if(snap.exists()){
kas=snap.val().kas||0;
bank=snap.val().bank||0;
}
updateDashboard();
});

function updateDashboard(){
document.getElementById("kas").innerText=kas;
document.getElementById("bank").innerText=bank;
document.getElementById("aset").innerText=kas+bank;
document.getElementById("profit").innerText=totalProfit;
}

window.setModal=()=>{
kas=parseInt(document.getElementById("setKas").value||0);
bank=parseInt(document.getElementById("setBank").value||0);
set(ref(db,"saldo"),{kas,bank});
}

window.tambahDigital=()=>{
let modal=parseInt(document.getElementById("modalDigital").value);
let jual=parseInt(document.getElementById("jualDigital").value);
let metode=document.getElementById("metodeDigital").value;
let profit=jual-modal;
totalProfit+=profit;

bank-=modal;
if(metode==="Kas") kas+=jual; else bank+=jual;

push(ref(db,"digital"),{modal,jual,profit});
set(ref(db,"saldo"),{kas,bank});
updateDashboard();
}

window.tambahEwallet=()=>{
let modal=parseInt(document.getElementById("modalEwallet").value);
let jual=parseInt(document.getElementById("jualEwallet").value);
let metode=document.getElementById("metodeEwallet").value;
let profit=jual-modal;
totalProfit+=profit;

bank-=modal;
if(metode==="Kas") kas+=jual; else bank+=jual;

push(ref(db,"ewallet"),{modal,jual,profit});
set(ref(db,"saldo"),{kas,bank});
updateDashboard();
}

window.tambahPengeluaran=()=>{
let nom=parseInt(document.getElementById("nomPengeluaran").value);
let dari=document.getElementById("dariPengeluaran").value;
if(dari==="Kas") kas-=nom; else bank-=nom;
set(ref(db,"saldo"),{kas,bank});
updateDashboard();
}

let ctx=document.getElementById('chart');
new Chart(ctx,{
type:'bar',
data:{
labels:['Kas','Bank'],
datasets:[{label:'Saldo',data:[kas,bank]}]
}
});

</script>
</body>
</html>
